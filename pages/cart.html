<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panier - Swagg</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body class="bg-gray-50 font-sans">
    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center">
                <a href="../index.html" class="flex items-center">
                    <img src="../images/logo.png" alt="Swagg Logo" class="h-12 mr-3">
                    <span class="text-2xl font-bold text-pink-600">Swagg</span>
                </a>
            </div>
            
            <nav class="hidden md:flex space-x-8">
                <a href="../index.html" class="text-gray-700 font-medium hover:text-pink-600 transition">Accueil</a>
                <a href="products.html" class="text-gray-700 font-medium hover:text-pink-600 transition">Produits</a>
                <a href="about.html" class="text-gray-700 font-medium hover:text-pink-600 transition">À propos</a>
                <a href="contact.html" class="text-gray-700 font-medium hover:text-pink-600 transition">Contact</a>
            </nav>
            
            <div class="flex items-center space-x-4">
                <a href="cart.html" class="relative">
                    <i class="fas fa-shopping-bag text-pink-600 text-xl"></i>
                    <span id="cart-count" class="absolute -top-2 -right-2 bg-pink-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </a>
                <button id="mobile-menu-button" class="md:hidden text-gray-700 hover:text-pink-600 focus:outline-none">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="md:hidden hidden bg-white border-t">
            <div class="container mx-auto px-4 py-2 space-y-2">
                <a href="../index.html" class="block py-2 text-gray-700 font-medium hover:text-pink-600 transition">Accueil</a>
                <a href="products.html" class="block py-2 text-gray-700 font-medium hover:text-pink-600 transition">Produits</a>
                <a href="about.html" class="block py-2 text-gray-700 font-medium hover:text-pink-600 transition">À propos</a>
                <a href="contact.html" class="block py-2 text-gray-700 font-medium hover:text-pink-600 transition">Contact</a>
            </div>
        </div>
    </header>

    <!-- Page Title -->
    <div class="bg-pink-50 py-8">
        <div class="container mx-auto px-4">
            <h1 class="text-3xl font-bold text-gray-800 text-center">Votre panier</h1>
        </div>
    </div>

    <!-- Cart Section -->
    <section class="py-12">
        <div class="container mx-auto px-4">
            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Cart Items -->
                <div class="lg:w-2/3">
                    <div id="cart-items" class="bg-white rounded-lg shadow-md p-6 mb-4">
                        <!-- Cart items will be loaded dynamically -->
                        <div id="empty-cart-message" class="hidden text-center py-8">
                            <i class="fas fa-shopping-bag text-gray-300 text-5xl mb-4"></i>
                            <p class="text-gray-500 mb-4">Votre panier est vide</p>
                            <a href="products.html" class="inline-block bg-pink-600 hover:bg-pink-700 text-white font-medium py-2 px-6 rounded-full transition">
                                Continuer vos achats
                            </a>
                        </div>
                    </div>
                    
                    <div class="flex justify-between items-center">
                        <a href="products.html" class="text-pink-600 hover:text-pink-700 transition flex items-center">
                            <i class="fas fa-arrow-left mr-2"></i>
                            Continuer vos achats
                        </a>
                        <button id="clear-cart-btn" class="text-gray-600 hover:text-gray-800 transition flex items-center">
                            <i class="fas fa-trash-alt mr-2"></i>
                            Vider le panier
                        </button>
                    </div>
                </div>
                
                <!-- Order Summary -->
                <div class="lg:w-1/3">
                    <div class="bg-white rounded-lg shadow-md p-6 sticky top-24">
                        <h2 class="text-lg font-bold text-gray-800 mb-4">Résumé de la commande</h2>
                        
                        <div class="border-b border-gray-200 pb-4 mb-4">
                            <div class="flex justify-between mb-2">
                                <span class="text-gray-600">Sous-total</span>
                                <span id="subtotal" class="font-medium">0 FCFA</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Livraison</span>
                                <span id="shipping" class="font-medium">Gratuite</span>
                            </div>
                        </div>
                        
                        <div class="flex justify-between mb-6">
                            <span class="text-lg font-bold text-gray-800">Total</span>
                            <span id="total" class="text-lg font-bold text-pink-600">0 FCFA</span>
                        </div>
                        
                        <button id="checkout-btn" class="w-full bg-pink-600 hover:bg-pink-700 text-white font-medium py-3 px-6 rounded-md transition mb-4">
                            Passer à la caisse
                        </button>
                        
                        <div class="flex items-center justify-center space-x-4 text-gray-500">
                            <i class="fab fa-cc-visa text-xl"></i>
                            <i class="fab fa-cc-mastercard text-xl"></i>
                            <i class="fab fa-cc-paypal text-xl"></i>
                            <span class="text-sm">et plus</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Checkout Modal -->
    <div id="checkout-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full max-h-screen overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-gray-800">Finaliser votre commande</h2>
                    <button id="close-modal-btn" class="text-gray-400 hover:text-gray-600 transition">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <form id="checkout-form" class="space-y-4">
                    <!-- Personal Information -->
                    <div>
                        <h3 class="text-lg font-medium text-gray-800 mb-3">Informations personnelles</h3>
                        <div class="space-y-3">
                            <div>
                                <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Nom complet</label>
                                <input type="text" id="name" name="name" required class="form-control" placeholder="Votre nom complet">
                            </div>
                            <div>
                                <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">Numéro de téléphone</label>
                                <input type="tel" id="phone" name="phone" required class="form-control" placeholder="Ex: 6XXXXXXXX">
                            </div>
                            <div>
                                <label for="address" class="block text-sm font-medium text-gray-700 mb-1">Adresse de livraison</label>
                                <textarea id="address" name="address" required class="form-control" rows="2" placeholder="Votre adresse complète"></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Delivery Information -->
                    <div>
                        <h3 class="text-lg font-medium text-gray-800 mb-3">Informations de livraison</h3>
                        <div class="space-y-3">
                            <div>
                                <label for="delivery-date" class="block text-sm font-medium text-gray-700 mb-1">Date de livraison souhaitée</label>
                                <input type="date" id="delivery-date" name="delivery-date" required class="form-control">
                            </div>
                            <div>
                                <label for="delivery-time" class="block text-sm font-medium text-gray-700 mb-1">Heure de livraison souhaitée</label>
                                <input type="time" id="delivery-time" name="delivery-time" required class="form-control">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Payment Method -->
                    <div>
                        <h3 class="text-lg font-medium text-gray-800 mb-3">Mode de paiement</h3>
                        <div class="space-y-2">
                            <div class="flex items-center">
                                <input type="radio" id="payment-orange" name="payment-method" value="Orange Money" class="h-4 w-4 text-pink-600 focus:ring-pink-500">
                                <label for="payment-orange" class="ml-2 block text-sm text-gray-700">
                                    Orange Money (694 938 602 - Touossido Djoko Teresa Dalvina)
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input type="radio" id="payment-mtn" name="payment-method" value="MTN Mobile Money" class="h-4 w-4 text-pink-600 focus:ring-pink-500">
                                <label for="payment-mtn" class="ml-2 block text-sm text-gray-700">
                                    MTN Mobile Money (679 257 080 - Touossido Djoko Teresa Dalvina)
                                </label>
                            </div>
                            <div class="flex items-center">
                                <input type="radio" id="payment-delivery" name="payment-method" value="Paiement à la livraison" class="h-4 w-4 text-pink-600 focus:ring-pink-500" checked>
                                <label for="payment-delivery" class="ml-2 block text-sm text-gray-700">
                                    Paiement à la livraison
                                </label>
                            </div>
                            
                            <!-- Transaction ID for mobile money payments -->
                            <div id="transaction-id-container" class="hidden mt-3">
                                <label for="transaction-id" class="block text-sm font-medium text-gray-700 mb-1">Numéro de transaction</label>
                                <input type="text" id="transaction-id" name="transaction-id" class="form-control" placeholder="Entrez le numéro de transaction">
                                <p class="text-xs text-gray-500 mt-1">Veuillez effectuer le paiement avant de finaliser la commande.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Order Summary -->
                    <div class="border-t border-gray-200 pt-4">
                        <h3 class="text-lg font-medium text-gray-800 mb-3">Résumé de la commande</h3>
                        <div id="checkout-items" class="space-y-2 mb-3">
                            <!-- Checkout items will be loaded dynamically -->
                        </div>
                        <div class="flex justify-between font-bold">
                            <span>Total</span>
                            <span id="checkout-total" class="text-pink-600">0 FCFA</span>
                        </div>
                    </div>
                    
                    <button type="submit" class="w-full bg-pink-600 hover:bg-pink-700 text-white font-medium py-3 px-6 rounded-md transition">
                        Confirmer la commande
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">Swagg</h3>
                    <p class="text-gray-400 mb-4">Votre boutique en ligne pour des vêtements et accessoires tendance qui vous permettent d'exprimer votre style unique.</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition">
                            <i class="fab fa-twitter"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">Liens rapides</h3>
                    <ul class="space-y-2">
                        <li><a href="../index.html" class="text-gray-400 hover:text-white transition">Accueil</a></li>
                        <li><a href="products.html" class="text-gray-400 hover:text-white transition">Produits</a></li>
                        <li><a href="about.html" class="text-gray-400 hover:text-white transition">À propos</a></li>
                        <li><a href="contact.html" class="text-gray-400 hover:text-white transition">Contact</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">Informations</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Conditions générales</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Politique de confidentialité</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Livraison</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">FAQ</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">Contact</h3>
                    <ul class="space-y-2 text-gray-400">
                        <li class="flex items-start">
                            <i class="fas fa-map-marker-alt mt-1 mr-2"></i>
                            <span>Cameroun</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-phone mt-1 mr-2"></i>
                            <div>
                                <p>Orange: +237 694 938 602</p>
                                <p>MTN: +237 679 257 080</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-envelope mt-1 mr-2"></i>
                            <span>contact@swagg.com</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-12 pt-8 text-center text-gray-400">
                <p>&copy; 2023 Swagg. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="../js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize cart
            initializeCart();
            
            // Display cart items
            displayCartItems();
            
            // Update cart summary
            updateCartSummary();
            
            // Clear cart button
            const clearCartBtn = document.getElementById('clear-cart-btn');
            if (clearCartBtn) {
                clearCartBtn.addEventListener('click', function() {
                    if (confirm('Êtes-vous sûr de vouloir vider votre panier ?')) {
                        window.swaggCart.clearCart();
                        displayCartItems();
                        updateCartSummary();
                    }
                });
            }
            
            // Checkout button
            const checkoutBtn = document.getElementById('checkout-btn');
            const checkoutModal = document.getElementById('checkout-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');
            
            if (checkoutBtn && checkoutModal) {
                checkoutBtn.addEventListener('click', function() {
                    if (cart.length === 0) {
                        alert('Votre panier est vide. Veuillez ajouter des produits avant de passer à la caisse.');
                        return;
                    }
                    
                    // Display checkout items
                    displayCheckoutItems();
                    
                    // Show modal
                    checkoutModal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden'; // Prevent scrolling
                });
            }
            
            if (closeModalBtn && checkoutModal) {
                closeModalBtn.addEventListener('click', function() {
                    checkoutModal.classList.add('hidden');
                    document.body.style.overflow = ''; // Enable scrolling
                });
            }
            
            // Payment method change
            const paymentMethods = document.querySelectorAll('input[name="payment-method"]');
            const transactionIdContainer = document.getElementById('transaction-id-container');
            
            if (paymentMethods && transactionIdContainer) {
                paymentMethods.forEach(method => {
                    method.addEventListener('change', function() {
                        if (this.value === 'Orange Money' || this.value === 'MTN Mobile Money') {
                            transactionIdContainer.classList.remove('hidden');
                        } else {
                            transactionIdContainer.classList.add('hidden');
                        }
                    });
                });
            }
            
            // Checkout form submission
            const checkoutForm = document.getElementById('checkout-form');
            
            if (checkoutForm) {
                checkoutForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Get form data
                    const name = document.getElementById('name').value;
                    const phone = document.getElementById('phone').value;
                    const address = document.getElementById('address').value;
                    const deliveryDate = document.getElementById('delivery-date').value;
                    const deliveryTime = document.getElementById('delivery-time').value;
                    const paymentMethod = document.querySelector('input[name="payment-method"]:checked').value;
                    const transactionId = document.getElementById('transaction-id').value;
                    
                    // Validate form
                    if (paymentMethod !== 'Paiement à la livraison' && !transactionId) {
                        alert('Veuillez entrer le numéro de transaction pour le paiement mobile.');
                        return;
                    }
                    
                    // Create order details object
                    const orderDetails = {
                        name: name,
                        phone: phone,
                        address: address,
                        deliveryDate: deliveryDate,
                        deliveryTime: deliveryTime,
                        paymentMethod: paymentMethod,
                        transactionId: transactionId,
                        items: cart,
                        total: getCartTotal()
                    };
                    
                    // Send WhatsApp message
                    window.swaggCart.sendWhatsAppOrder(orderDetails);
                    
                    // Clear cart and close modal
                    window.swaggCart.clearCart();
                    checkoutModal.classList.add('hidden');
                    document.body.style.overflow = ''; // Enable scrolling
                    
                    // Redirect to thank you page or show thank you message
                    alert('Merci pour votre commande ! Nous vous contacterons bientôt pour confirmer les détails de la livraison.');
                    window.location.href = '../index.html';
                });
            }
        });
        
        // Display cart items
        function displayCartItems() {
            const cartItemsContainer = document.getElementById('cart-items');
            const emptyCartMessage = document.getElementById('empty-cart-message');
            
            if (!cartItemsContainer) return;
            
            // Clear container
            cartItemsContainer.innerHTML = '';
            
            // Check if cart is empty
            if (cart.length === 0) {
                emptyCartMessage.classList.remove('hidden');
                cartItemsContainer.appendChild(emptyCartMessage);
                return;
            }
            
            // Hide empty cart message
            emptyCartMessage.classList.add('hidden');
            
            // Create cart items
            cart.forEach(item => {
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                
                cartItem.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                    <div class="cart-item-details">
                        <h3 class="font-medium text-gray-800">${item.name}</h3>
                        <p class="text-pink-600 font-bold">${item.price.toLocaleString()} FCFA</p>
                    </div>
                    <div class="cart-item-actions">
                        <div class="quantity-control mr-4">
                            <button class="quantity-btn decrease-btn" data-id="${item.id}">-</button>
                            <input type="text" class="quantity-input" value="${item.quantity}" readonly>
                            <button class="quantity-btn increase-btn" data-id="${item.id}">+</button>
                        </div>
                        <button class="text-gray-400 hover:text-red-500 transition remove-item-btn" data-id="${item.id}">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </div>
                `;
                
                cartItemsContainer.appendChild(cartItem);
            });
            
            // Add event listeners to quantity buttons
            const decreaseBtns = document.querySelectorAll('.decrease-btn');
            const increaseBtns = document.querySelectorAll('.increase-btn');
            const removeItemBtns = document.querySelectorAll('.remove-item-btn');
            
            decreaseBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    const item = cart.find(item => item.id === productId);
                    if (item && item.quantity > 1) {
                        window.swaggCart.updateQuantity(productId, item.quantity - 1);
                        displayCartItems();
                        updateCartSummary();
                    }
                });
            });
            
            increaseBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    const item = cart.find(item => item.id === productId);
                    if (item) {
                        window.swaggCart.updateQuantity(productId, item.quantity + 1);
                        displayCartItems();
                        updateCartSummary();
                    }
                });
            });
            
            removeItemBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    window.swaggCart.removeFromCart(productId);
                    displayCartItems();
                    updateCartSummary();
                });
            });
        }
        
        // Update cart summary
        function updateCartSummary() {
            const subtotalElement = document.getElementById('subtotal');
            const totalElement = document.getElementById('total');
            
            if (subtotalElement && totalElement) {
                const total = getCartTotal();
                subtotalElement.textContent = `${total.toLocaleString()} FCFA`;
                totalElement.textContent = `${total.toLocaleString()} FCFA`;
            }
        }
        
        // Display checkout items
        function displayCheckoutItems() {
            const checkoutItemsContainer = document.getElementById('checkout-items');
            const checkoutTotalElement = document.getElementById('checkout-total');
            
            if (!checkoutItemsContainer) return;
            
            // Clear container
            checkoutItemsContainer.innerHTML = '';
            
            // Create checkout items
            cart.forEach(item => {
                const checkoutItem = document.createElement('div');
                checkoutItem.className = 'flex justify-between';
                
                checkoutItem.innerHTML = `
                    <span>${item.name} x ${item.quantity}</span>
                    <span>${(item.price * item.quantity).toLocaleString()} FCFA</span>
                `;
                
                checkoutItemsContainer.appendChild(checkoutItem);
            });
            
            // Update total
            if (checkoutTotalElement) {
                const total = getCartTotal();
                checkoutTotalElement.textContent = `${total.toLocaleString()} FCFA`;
            }
        }
    </script>
</body>
</html> 